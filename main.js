(()=>{"use strict";const e=new class{async getQUizData(){const e=await fetch("https://opentdb.com/api.php?amount=10&type=multiple");return await e.json()}},t=new class{constructor(){this.questions,this.questionNumber=0,this.score=0}initiateGame(e){this.questions=e.results}nextQuestion(){this.questionNumber++}checkAnswer(e){const t=e.textContent,n=this.questions[this.questionNumber].correct_answer;s.addBtnClasses(e,n),t===n?(this.score++,s.playSoundEffect("correct")):s.playSoundEffect("incorrect"),s.updateScore(this.score)}},s=new class{constructor(){this.question=document.querySelector(".question"),this.answerBtns=Array.from(document.querySelectorAll(".answer-btn")),this.answerBtnGroup=document.querySelector(".answer-btn-group"),this.progress=document.querySelector(".progress-bar"),this.progressText=document.querySelector(".progress-text"),this.nextQuestion=document.querySelector(".next-question"),this.score=document.querySelector(".score")}populateQuestionUi(e,t){const s=e[t],n=Math.floor(6*Math.random()),o=s.incorrect_answers;this.question.textContent=this.replaceSpecialCharacters(s.question),this.updateProgressBar(),o.splice(n,0,s.correct_answer);for(let e=0;e<o.length;e++)this.answerBtns[e].textContent=this.replaceSpecialCharacters(o[e])}replaceSpecialCharacters(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}addBtnClasses(e,t){t=s.replaceSpecialCharacters(t),e.textContent!==t&&(e.classList.remove("btn-info"),e.classList.add("btn-danger")),this.answerBtns.forEach((e=>{e.disabled="true",e.textContent===t&&(e.classList.remove("btn-info"),e.classList.add("btn-success"))}))}removeBtnClasses(){this.answerBtns.forEach((e=>{e.disabled="",e.classList.remove("btn-info"),e.classList.remove("btn-success"),e.classList.remove("btn-danger"),e.classList.add("btn-info")}))}playSoundEffect(e){const t=new Audio("./audio/correct_answer.mp3"),s=new Audio("./audio/wrong_answer.mp3");"correct"===e?t.play():s.play()}updateScore(e){this.score.textContent=e}showAndHideNextQuestionButton(){this.nextQuestion.classList.contains("hide")?this.nextQuestion.classList.remove("hide"):this.nextQuestion.classList.add("hide")}updateProgressBar(){const e=(t.questionNumber+1)/t.questions.length*100;this.progress.style.width=e+"%",this.progressText.textContent=`Question ${t.questionNumber+1} / ${t.questions.length}`}};window.addEventListener("DOMContentLoaded",(function(n){e.getQUizData().then((e=>{t.initiateGame(e),s.populateQuestionUi(t.questions,t.questionNumber)}))})),s.answerBtnGroup.addEventListener("click",(e=>{e.target.classList.contains("answer-btn")&&(t.checkAnswer(e.target),s.showAndHideNextQuestionButton()),e.preventDefault()})),s.nextQuestion.addEventListener("click",(function(){t.questionNumber++,s.removeBtnClasses(),s.populateQuestionUi(t.questions,t.questionNumber),s.showAndHideNextQuestionButton()}))})();